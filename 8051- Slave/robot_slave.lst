C51 COMPILER V9.55   ROBOT_SLAVE                                                           04/16/2019 17:07:41 PAGE 1   


C51 COMPILER V9.55, COMPILATION OF MODULE ROBOT_SLAVE
OBJECT MODULE PLACED IN robot_slave.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE src\robot_slave.c LARGE OPTIMIZE(0,SPEED) BROWSE DEBUG OBJECTEXTEND PRIN
                    -T(.\robot_slave.lst) TABS(2) OBJECT(robot_slave.obj)

line level    source

   1          #include "spi_slave.h"
   2          #include "c8051F020.h"
   3          
   4          /*
   5          #############################################################################
   6                  PIN List
   7          #############################################################################
   8          *
   9          * 
  10          *
  11          * SPI = SCK -> P0.0 | MISO -> P0.1 | MOSI -> P0.2 | NSS -> P0.3
  12          *       SCK : OUT
  13          *       MISO : IN
  14          *       MOSI : OUT
  15          *       NSS : Vcc
  16          *
  17          * 
  18          *
  19          * 
  20          *
  21          * 
  22          *
  23          * 
  24          *
  25          *
  26          *
  27          *
  28          */
  29          
  30          sfr Reg = 0xFF;
  31          
  32          OUT_M2 commands = {ACQ_non,
  33                              0,
  34                              GEN_non,
  35                              0,
  36                              0,
  37                              0,
  38                              0,
  39                              Lumiere_non,
  40                              0,
  41                              0,
  42                              0,
  43                              0,
  44                              Servo_non,
  45                              0,
  46                              Photo_non,
  47                              0,
  48                              0};
  49          
  50          void Init_External_clk()
  51          {
  52   1        // Config External Osci
  53   1        OSCXCN = 0x67;
  54   1        while(OSCXCN != 0xE7) {}
C51 COMPILER V9.55   ROBOT_SLAVE                                                           04/16/2019 17:07:41 PAGE 2   

  55   1        
  56   1        // Use Exern CLK
  57   1        OSCICN = 0x08;
  58   1          
  59   1        CKCON = 0x00;
  60   1      }
  61          
  62          void Enable_Crossbar()
  63          {
  64   1        // Enable Crossbar
  65   1        XBR2 |= 0x40;
  66   1      }
  67          
  68          void Enable_general_Int()
  69          {
  70   1        EA = 1; // Enable general interruption
  71   1      }
  72          
  73          int main (void)
  74          {
  75   1        Reg = 0xDE;   // Dévalidation du watchdog 
  76   1        Reg = 0xAD;
  77   1        
  78   1        Init_External_clk();
  79   1        
  80   1        Init_SPI();
  81   1        
  82   1        Enable_Crossbar();
  83   1      
  84   1        Enable_general_Int();
  85   1        LED = 0;
  86   1        
  87   1        while(1)
  88   1        {
  89   2        /*  if(spi_data_is_ready() == 1)
  90   2          {
  91   2            spi_parse_cmd(&commands);
  92   2            if(commands.Etat_Servo == Servo_oui)
  93   2            {
  94   2              LED = 1;
  95   2            }
  96   2          }*/
  97   2          
  98   2        }
  99   1        
 100   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     45    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =     17    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
